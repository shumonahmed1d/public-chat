<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Public Chat — Firebase</title>
  <style>
    body{font-family: system-ui, -apple-system, Roboto,"Noto Sans Bengali",sans-serif;max-width:900px;margin:24px auto;padding:0 16px}
    #messages{border:1px solid #ddd;padding:12px;height:420px;overflow:auto;background:#fafafa;margin:12px 0}
    .msg{padding:8px;border-radius:8px;margin-bottom:8px;background:#fff;box-shadow:0 0 0 1px rgba(0,0,0,0.02)}
    .meta{font-size:12px;color:#666;margin-bottom:6px}
    form{display:flex;gap:8px}
    input[type=text]{flex:1;padding:10px;border:1px solid #ccc;border-radius:6px}
    button{padding:10px 14px;border-radius:6px;border:0;background:#0b79ff;color:#fff}
  </style>
</head>
<body>

  <h2>Public Chat</h2>

  <div id="messages"></div>

  <form id="chatForm">
    <input id="nameInput" type="text" placeholder="তোমার নাম..." />
    <input id="textInput" type="text" placeholder="একটা message লিখো..." autocomplete="off" />
    <button type="submit">Send</button>
  </form>

  <script type="module">
    // ⬇️ তোমার firebaseConfig এখানে বসানো হলো
    const firebaseConfig = {
      apiKey: "AIzaSyD_Z7-3oe8KK5XA6OyKe0D-tS_Z6KKmyZY",
      authDomain: "mychat-c5b4e.firebaseapp.com",
      databaseURL: "https://mychat-c5b4e-default-rtdb.firebaseio.com",
      projectId: "mychat-c5b4e",
      storageBucket: "mychat-c5b4e.firebasestorage.app",
      messagingSenderId: "1023283718484",
      appId: "1:1023283718484:web:c58197b559aa1e790640c1",
      measurementId: "G-YB9XZPPH41"
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-database.js";

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const messagesRef = ref(db, "messages");

    const messagesEl = document.getElementById("messages");
    const textInput = document.getElementById("textInput");
    const nameInput = document.getElementById("nameInput");
    const form = document.getElementById("chatForm");

    function renderMessage(data) {
      const el = document.createElement("div");
      el.className = "msg";
      el.innerHTML = `
        <div class="meta">${data.user || "Guest"} • ${new Date(data.time).toLocaleString()}</div>
        <div>${data.text}</div>
      `;
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    onChildAdded(messagesRef, snap => {
      renderMessage(snap.val());
    });

    form.addEventListener("submit", e => {
      e.preventDefault();
      const user = nameInput.value || "Guest";
      const text = textInput.value.trim();
      if (!text) return;
      push(messagesRef, {
        user,
        text,
        time: Date.now()
      });
      textInput.value = "";
    });
  </script>

</body>
      </html>
